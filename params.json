{"name":"ngx_mruby","tagline":"ngx_mruby  to provide an alternative to lua-nginx-module","body":"## What's ngx_mruby\r\n__ngx_murby is A Fast and Memory-Efficient Web Server Extension Mechanism Using Scripting Language mruby for nginx.__\r\nngx_mruby is to provide an alternative to [mod_mruby](http://matsumoto-r.github.io/mod_mruby/) for nginx.you can implemet nginx modules by Ruby scripts on nginx!\r\n\r\n```ruby\r\n# location /proxy {\r\n#   mruby_set $backend \"/path/to/proxy.rb\";\r\n#   proxy_pass   http://$backend;\r\n# }\r\n\r\nbackends = [\r\n  \"test1\",\r\n  \"test2\",\r\n  \"test3\",\r\n]\r\n\r\nr = Redis.new \"192.168.12.251\", 6379\r\nr.get backends[rand(backends.length)]\r\n```\r\n\r\n## How to use\r\n\r\n### 1. Download\r\n\r\n    git clone git://github.com/matsumoto-r/ngx_mruby.git\r\n    cd ngx_mruby\r\n    git submodule init\r\n    git submodule update\r\n\r\n### 2. Build\r\n* configure example\r\n\r\n        ./configure --with-ngx-src-root=${NGINX_SRC} --with-ngx-config-opt=\"--prefix=/usr/local/nginx\"\r\n\r\n* mruby build\r\n\r\n        make build_mruby\r\n\r\n* ngx_mruby build\r\n\r\n        make \r\nor  \r\n\r\n        cd ${NGINX_SRC}\r\n        ./configure --prefix=/usr/local/nginx --add-module=${NGX_MRUBY_SRC} --add-module=${SOME_MODULE}\r\n        make\r\n\r\n\r\n### 3. Install\r\n\r\n    sudo make install\r\n\r\n### 4. Add setting\r\n\r\n    location /mruby {\r\n        mruby_content_handler /usr/local/nginx122/html/hello.rb;\r\n    }\r\n\r\n### 5. Create mruby script /usr/local/nginx/html/hello.rb\r\n\r\n    Nginx.rputs(Time.now.to_s + \"hello mruby world for nginx.\")\r\n\r\n### 6. Start nginx\r\n\r\n    /usr/local/nginx/sbin/nginx\r\n\r\n### 7. Access http://example.com/mruby (sed/example.com/mydomain/)\r\n\r\n    Sat Jul 28 18:05:51 2012 hello mruby world for nginx.\r\n\r\nDisplay above. Welcome mruby world for nginx!!\r\n\r\n\r\n\r\n# License\r\nunder the MIT License:\r\n\r\n* http://www.opensource.org/licenses/mit-license.php\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}